@model PizzaShop.Domain.ViewModels.UserListViewModel

<link rel="stylesheet" href="~/css/dashboard.css" asp-append-version="true">


<div class="add-user-back">
  <div class="mt-3 me-3 ms-4 d-flex flex-column">
    <div class="d-flex justify-content-between">
      <div>
        <h2>Users</h2>
      </div>
      <div class="d-flex">
        <div class="input-group rounded d-none d-md-flex">
          <input id="searchInput" type="search" class="form-control rounded " placeholder="Search" />
          <span class="input-group-text border-0" id="search-addon">
            <i class="fas fa-search"></i>
          </span>
        </div>
        <div class="input-box d-block d-md-none">
          <input  type="text" placeholder="Search..." />
          <span class="search">
            <i class="uil uil-search search-icon"></i>
          </span>
          <i class="uil uil-times close-icon"></i>
        </div>
        <a asp-controller="UserList" asp-action="AddUser" class="text-decoration-none d-none d-md-block">
          <button type="button" class="btn btn-primary userButton-size d-none d-md-block">
            Add User +
          </button></a>
        <a asp-controller="UserList" asp-action="AddUser" class="text-decoration-none d-block d-md-none">
          <button type="button" class="btn btn-primary userButton-size-md  d-block d-md-none">
            <!-- <a href="#"> <i class="fas fa-plus"></i></a></button> -->+
          </button></a>
      </div>
    </div>
    <div class="table-user mt-5 mx-2 shadow-lg p-4 table-responsive">
      <table class="table table-hover" style="white-space: nowrap">
        <thead>
          <tr>
            <th>Name <i class="fas fa-sort"></i></th>
            <th>Email</th>
            <th>Phone</th>
            <th>Role <i class="fas fa-sort"></i></th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="tableBody">
          @foreach (var user in ViewBag.model)
          {
            <tr>
              <td>@user.Username</td>
              <td>@user.Email</td>
              <td>@user.Phone</td>
              <td>@user.RoleName</td>
              <td>
                @if (user.Status)
                {
                  <span class="status-badge">Active</span>
                }
                else
                {
                  <span class="text-danger">Inactive</span>
                }
              </td>
              <td><a onclick="editUser(@user.UserId)"><button class="btn btn-light btn-sm">
                    <i class="fas fa-pencil"></i></button></a>
                <button type="button" class="btn-light btn btn-sm delete-icon-border" data-bs-toggle="modal"  data-bs-target="#deleteModel" onclick="openModel(@user.UserId)">
                                        <a href="#" class="delete-icon">  <i class="fas fa-trash"></i></a></button>
              </td>
            </tr>
          }
        </tbody>

      </table>
      <div class="d-flex justify-content-end align-items-center gap-3">
        <div>
          Items Per Page:
          <select class="form-select form-select-sm d-inline-block" style="width: auto">
            <option>5</option>
            <option>10</option>
            <option>20</option>
          </select>
        </div>
        <nav>
          <ul class="pagination pagination-sm mb-0 ms-2">
            <li class="page-item">
              <a class="page-link" href="#">«</a>
            </li>
            <li class="page-item">
              <a class="page-link" href="#">1</a>
            </li>
            <li class="page-item">
              <a class="page-link" href="#">2</a>
            </li>
            <li class="page-item">
              <a class="page-link" href="#">3</a>
            </li>
            <li class="page-item">
              <a class="page-link" href="#">»</a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="deleteModel" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
  aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">
          Delete Confirmation
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="d-flex flex-column align-items-center justify-content-center">
          <img src="./images/warning.svg" alt="" class="popup-svg" />
          <p>Are you sure you want to delete this user?</p>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          No
        </button>
        <button type="button" class="btn btn-primary" id="deleteButton" data-bs-dismiss="modal">Yes</button>
      </div>
    </div>
  </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}

  <script src="~/js/userList.js" asp-append-version="true"></script>
